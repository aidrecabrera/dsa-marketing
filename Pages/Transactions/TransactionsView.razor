@page "/view/{CurrentTransactionId:int}"
@using System.Transactions
@using Aneta.Models
@using System.Runtime.InteropServices
@using Aneta.Data
@using Transaction = System.Transactions.Transaction

<div>
    <h1>Transaction ID: @CurrentTransactionId</h1>
    <h1>@_viewTransactionDisplayDetails.MunicipalityName</h1>
    <h1>@_viewTransactionDisplayDetails.BarangayName</h1>
    <h1>@_viewTransactionDocumentDetails.PunongBarangayName</h1>
    <h1>@_viewTransactionDocumentDetails.BarangayTreasurerName</h1>
    
</div>

@code {
    [Inject]
    private DsaClusterContext? Context { get; set; }

    [Inject]
    UnitOfWork? UnitOfWork { get; set; }

    [Parameter]
    public int CurrentTransactionId { get; set; }

    private TransactionDetail _viewTransactionDisplayDetails;
    private TransactionDocument _viewTransactionDocumentDetails;

    private List<TransactionItem> _transactionItems;

    protected override void OnInitialized()
    {
        UnitOfWork = new UnitOfWork(Context);
        _viewTransactionDisplayDetails = UnitOfWork.TransactionDetails.GetById(CurrentTransactionId);
        _viewTransactionDocumentDetails = UnitOfWork.TransactionDocuments.GetById(CurrentTransactionId);
    }
}